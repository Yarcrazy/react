{"version":3,"sources":["Table/Cell.js","Table/Row.js","Table/Table.js","TestTable.js","App.js","index.js"],"names":["Cell","props","scrollLeft","state","isFixed","this","tableLeftBorder","tableRect","x","tableRightBorder","right","cellLeftBorder","ref","current","getBoundingClientRect","cellRightBorder","defaultCellLeftBorder","defaultCellRightBorder","setState","React","createRef","className","style","left","children","Component","Row","rows","scrollTop","push","map","el","i","type","key","top","Table","handleScroll","e","target","tableRef","Array","isArray","length","onScroll","TestTable","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.e8bc3376.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nclass Cell extends React.Component {\r\n\r\n  ref;\r\n  scrollLeft = 0;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isFixed: props.isFixed,\r\n    }\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    if (this.state.isFixed === 'col-fixed') {\r\n      let tableLeftBorder = this.props.tableRect.x;\r\n      let tableRightBorder = this.props.tableRect.right;\r\n      let cellLeftBorder = this.ref.current.getBoundingClientRect().x;\r\n      let cellRightBorder = this.ref.current.getBoundingClientRect().right;\r\n      if (cellLeftBorder <= tableLeftBorder) {\r\n        this.scrollLeft = this.props.scrollLeft - this.state.defaultCellLeftBorder + tableLeftBorder;\r\n      }\r\n      // TODO магическое число!!! да и вообще все нахрен переделать!\r\n      if (cellRightBorder - 50 >= tableRightBorder) {\r\n        this.scrollLeft = this.props.scrollLeft + this.state.defaultCellRightBorder - tableLeftBorder;\r\n      }\r\n      //scrollLeft = this.props.scrollLeft;\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.state.isFixed === 'col-fixed') {\r\n      this.setState({defaultCellLeftBorder: this.ref.current.getBoundingClientRect().x});\r\n      this.setState({defaultCellRightBorder: this.ref.current.getBoundingClientRect().right});\r\n    }\r\n  }\r\n\r\n  render() {\r\n    this.ref = React.createRef();\r\n    let className = this.props.className + ' ' + (this.state.isFixed ? this.state.isFixed : '');\r\n\r\n    if (this.state.isFixed === 'col-fixed') {\r\n      //scrollLeft = this.props.scrollLeft;\r\n    }\r\n\r\n    return <div className={className} style={{left: this.scrollLeft}} ref={this.ref}>\r\n      {this.props.children}\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default Cell;\r\n","import React from 'react';\r\nimport Cell from \"./Cell\";\r\n\r\nclass Row extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isFixed: props.isFixed,\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let rows = [];\r\n    let className = this.props.className + ' ' + (this.state.isFixed ? this.state.isFixed : '');\r\n    const children = this.props.children;\r\n\r\n    let scrollTop = 0;\r\n    let scrollLeft = 0;\r\n    let tableRect = {};\r\n\r\n    if (this.state.isFixed === 'row-fixed') {\r\n      scrollTop = this.props.scrollTop;\r\n      //scrollTop = this.props.tableRef.current.scrollTop;\r\n      //console.log(this.props.tableRef);\r\n    }\r\n\r\n    rows.push(\r\n      children.map((el, i) => {\r\n          if (el.props.className === 'col-fixed') {\r\n            scrollLeft = this.props.scrollLeft;\r\n            tableRect = this.props.tableRect;\r\n          }\r\n          return <Cell className={el.type}\r\n                       isFixed={el.props.className}\r\n                       key={i}\r\n                       tableRect={tableRect}\r\n                       scrollLeft={scrollLeft}>\r\n            {el.props.children}\r\n          </Cell>\r\n        }\r\n      )\r\n    );\r\n\r\n    return <div className={className} style={{top: scrollTop}}>\r\n      {rows}\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default Row;\r\n","import React from 'react';\r\nimport Row from \"./Row\";\r\n\r\nclass Table extends React.Component {\r\n\r\n  tableRef;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isFixed: props.isFixed,\r\n      scrollLeft: 0,\r\n      scrollTop: 0,\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.props.className === 'table') {\r\n      this.setState({tableRect: this.tableRef.current.getBoundingClientRect()});\r\n    }\r\n  }\r\n\r\n  handleScroll = (e) => {\r\n    if (this.props.className === 'table') {\r\n      this.setState({\r\n        scrollTop: e.target.scrollTop,\r\n        scrollLeft: e.target.scrollLeft,\r\n      });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const rows = [];\r\n    const children = this.props.children;\r\n    let className = '';\r\n    this.tableRef = (this.props.className === 'table') ? React.createRef() : '';\r\n\r\n    let scrollLeft = this.props.scrollLeft;\r\n    let scrollTop = this.props.scrollTop;\r\n    let tableRect = this.props.tableRect;\r\n\r\n    if (this.props.className === 'table') {\r\n      scrollTop = this.state.scrollTop;\r\n      scrollLeft = this.state.scrollLeft;\r\n      tableRect = this.state.tableRect;\r\n    }\r\n\r\n    if (Array.isArray(children)) {\r\n      rows.push(\r\n        children.map((el, i) => {\r\n          if (el.type === 'tr') {\r\n            return (<Row className={el.type}\r\n                         isFixed={el.props.className}\r\n                         key={i}\r\n                         scrollTop={scrollTop}\r\n                         tableRect={tableRect}\r\n                         scrollLeft={scrollLeft}>\r\n              {el.props.children}\r\n            </Row>)\r\n          } else {\r\n            return (<Table className={el.type}\r\n                           isFixed={el.props.className}\r\n                           key={i}\r\n                           scrollTop={scrollTop}\r\n                           tableRect={tableRect}\r\n                           scrollLeft={scrollLeft}>\r\n              {el.props.children}\r\n            </Table>)\r\n          }\r\n        })\r\n      );\r\n    } else {\r\n      if (children.type === 'tr') {\r\n        rows.push(\r\n          <Row className={children.type}\r\n               isFixed={children.props.className}\r\n               key={children.type.length}\r\n               scrollTop={scrollTop}\r\n               tableRect={tableRect}\r\n               scrollLeft={scrollLeft}>{children.props.children}\r\n          </Row>)\r\n      } else {\r\n        rows.push(\r\n          <Table className={children.type}\r\n                 isFixed={children.props.className}\r\n                 key={children.type.length}\r\n                 scrollTop={scrollTop}\r\n                 tableRect={tableRect}\r\n                 scrollLeft={scrollLeft}>{children.props.children}\r\n          </Table>\r\n        )\r\n      }\r\n    }\r\n\r\n    className += this.props.className + ' ' + (this.state.isFixed ? this.state.isFixed : '');\r\n    //TODO можно использовать classNames\r\n    return (\r\n      <div className={className} ref={this.tableRef} onScroll={this.handleScroll}>\r\n        {rows}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Table;","import React from 'react';\r\nimport Table from \"./Table/Table\";\r\n\r\nexport default function TestTable() {\r\n  return (\r\n    <Table className={'table'}>\r\n      <thead>\r\n      <tr className={'row-fixed'}>\r\n        <th><div>ш1</div></th>\r\n        <th className={'col-fixed'}>ш2</th>\r\n        <th>ш3</th>\r\n        <th>ш4</th>\r\n        <th>ш5</th>\r\n        <th>ш6</th>\r\n        <th>ш7</th>\r\n        <th>ш8</th>\r\n        <th>ш9</th>\r\n      </tr>\r\n      </thead>\r\n      <tbody>\r\n      <tr>\r\n        <td>1</td>\r\n        <td className={'col-fixed'}>2</td>\r\n        <td>3</td>\r\n        <td>4</td>\r\n        <td>5</td>\r\n        <td>6</td>\r\n        <td>7</td>\r\n        <td>8</td>\r\n        <td>9</td>\r\n      </tr>\r\n      <tr>\r\n        <td>1</td>\r\n        <td className={'col-fixed'}>2</td>\r\n        <td>3</td>\r\n        <td>4</td>\r\n        <td>5</td>\r\n        <td>6</td>\r\n        <td>7</td>\r\n        <td>8</td>\r\n        <td>9</td>\r\n      </tr>\r\n      <tr>\r\n        <td>1</td>\r\n        <td className={'col-fixed'}>2</td>\r\n        <td>3</td>\r\n        <td>4</td>\r\n        <td>5</td>\r\n        <td>6</td>\r\n        <td>7</td>\r\n        <td>8</td>\r\n        <td>9</td>\r\n      </tr>\r\n      <tr>\r\n        <td>1</td>\r\n        <td className={'col-fixed'}>2</td>\r\n        <td>3</td>\r\n        <td>4</td>\r\n        <td>5</td>\r\n        <td>6</td>\r\n        <td>7</td>\r\n        <td>8</td>\r\n        <td>9</td>\r\n      </tr>\r\n      <tr>\r\n        <td>1</td>\r\n        <td className={'col-fixed'}>2</td>\r\n        <td>3</td>\r\n        <td>4</td>\r\n        <td>5</td>\r\n        <td>6</td>\r\n        <td>7</td>\r\n        <td>8</td>\r\n        <td>9</td>\r\n      </tr>\r\n      <tr>\r\n        <td>1</td>\r\n        <td className={'col-fixed'}>2</td>\r\n        <td>3</td>\r\n        <td>4</td>\r\n        <td>5</td>\r\n        <td>6</td>\r\n        <td>7</td>\r\n        <td>8</td>\r\n        <td>9</td>\r\n      </tr>\r\n      <tr>\r\n        <td>1</td>\r\n        <td className={'col-fixed'}>2</td>\r\n        <td>3</td>\r\n        <td>4</td>\r\n        <td>5</td>\r\n        <td>6</td>\r\n        <td>7</td>\r\n        <td>8</td>\r\n        <td>9</td>\r\n      </tr>\r\n      </tbody>\r\n    </Table>\r\n  )\r\n}\r\n","import React from 'react';\r\nimport TestTable from \"./TestTable\";\r\n\r\nfunction App() {\r\n  return (\r\n    <TestTable/>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(<App/>, document.getElementById('root'));"],"sourceRoot":""}