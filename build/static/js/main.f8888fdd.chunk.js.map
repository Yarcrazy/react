{"version":3,"sources":["Table/Cell.js","Table/Row.js","Table/Table.js","TestTable.js","App.js","index.js"],"names":["Cell","props","state","fixFlag","this","isFixed","setState","defaultCellLeftBorder","ref","current","getBoundingClientRect","x","width","React","createRef","className","cellLeft","num","tableLeftBorder","console","log","scrollLeft","onChangeBorder","style","left","children","Component","Row","rows","scrollTop","j","push","map","el","i","type","key","top","Table","handleScroll","e","target","handleChangeBorder","includes","tableRef","Array","isArray","length","onScroll","TestTable","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.f8888fdd.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nclass Cell extends React.Component {\r\n\r\n  ref;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      fixFlag: false,\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.props.isFixed === 'col-fixed') {\r\n      this.setState({defaultCellLeftBorder: this.ref.current.getBoundingClientRect().x,\r\n      width: this.ref.current.getBoundingClientRect().width});\r\n    }\r\n  }\r\n\r\n  render() {\r\n    this.ref = React.createRef();\r\n    let className = this.props.className + ' ' + (this.props.isFixed ? this.props.isFixed : '');\r\n    let cellLeft = 0;\r\n    const num = this.props.num;\r\n\r\n    if ((this.props.tableLeftBorder) && (this.props.isFixed === 'col-fixed')) {\r\n      console.log(this.props.tableLeftBorder);\r\n\r\n      if ((this.props.scrollLeft >= this.state.defaultCellLeftBorder - this.props.tableLeftBorder[num])) {\r\n        if (!this.state.fixFlag) {\r\n          this.setState({fixFlag: true});\r\n          if (this.props.onChangeBorder) {\r\n            this.props.onChangeBorder(this.props.tableLeftBorder[num] + this.state.width);\r\n          }\r\n        }\r\n      } else {\r\n        if (this.state.fixFlag) {\r\n          this.setState({fixFlag: false});\r\n          cellLeft = 0;\r\n        }\r\n      }\r\n\r\n      if (this.state.fixFlag) {\r\n        cellLeft = this.props.scrollLeft - this.state.defaultCellLeftBorder + this.props.tableLeftBorder[num];\r\n      }\r\n    }\r\n\r\n    return <div className={className} style={{left: cellLeft}} ref={this.ref}>\r\n      {this.props.children}\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default Cell;","import React from 'react';\r\nimport Cell from \"./Cell\";\r\n\r\nclass Row extends React.Component {\r\n\r\n  render() {\r\n    let rows = [];\r\n    let className = this.props.className + ' ' + (this.props.isFixed ? this.props.isFixed : '');\r\n    const children = this.props.children;\r\n\r\n    let scrollTop = 0;\r\n    let scrollLeft = 0;\r\n    let tableLeftBorder = 0;\r\n    let onChangeBorder;\r\n\r\n    if (this.props.isFixed === 'row-fixed') {\r\n      scrollTop = this.props.scrollTop;\r\n      //scrollTop = this.props.tableRef.current.scrollTop;\r\n      //console.log(this.props.tableRef);\r\n    }\r\n\r\n    let j = -1;\r\n    rows.push(\r\n      children.map((el, i) => {\r\n          if (el.props.className === 'col-fixed') {\r\n            if (this.props.isFixed === 'row-fixed') {\r\n              onChangeBorder = this.props.onChangeBorder;\r\n            }\r\n            scrollLeft = this.props.scrollLeft;\r\n            tableLeftBorder = this.props.tableLeftBorder;\r\n            j++;\r\n          }\r\n          return <Cell className={el.type}\r\n                       isFixed={el.props.className}\r\n                       key={i}\r\n                       num={j}\r\n                       tableLeftBorder={tableLeftBorder}\r\n                       onChangeBorder={onChangeBorder}\r\n                       scrollLeft={scrollLeft}>\r\n            {el.props.children}\r\n          </Cell>\r\n        }\r\n      )\r\n    );\r\n\r\n    return <div className={className} style={{top: scrollTop}}>\r\n      {rows}\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default Row;\r\n","import React from 'react';\r\nimport Row from \"./Row\";\r\n\r\nclass Table extends React.Component {\r\n\r\n  tableRef;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isFixed: props.isFixed,\r\n      scrollLeft: 0,\r\n      scrollTop: 0,\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.props.className === 'table') {\r\n      this.setState({tableLeftBorder: [this.tableRef.current.getBoundingClientRect().x]});\r\n    }\r\n  }\r\n\r\n  handleScroll = (e) => {\r\n    if (this.props.className === 'table') {\r\n      this.setState({\r\n        scrollTop: e.target.scrollTop,\r\n        scrollLeft: e.target.scrollLeft,\r\n      });\r\n    }\r\n  };\r\n\r\n  handleChangeBorder = (tableLeftBorder) => {\r\n    if (this.props.className === 'table') {\r\n      this.setState((state) => {\r\n        // Если такого значения границы нет в массиве, то добавлять\r\n        return (!state.tableLeftBorder.includes(tableLeftBorder)) ?\r\n          {tableLeftBorder: [...state.tableLeftBorder, tableLeftBorder]} :\r\n          {tableLeftBorder: state.tableLeftBorder};\r\n      });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const rows = [];\r\n    const children = this.props.children;\r\n    let className = '';\r\n    this.tableRef = (this.props.className === 'table') ? React.createRef() : '';\r\n\r\n    let scrollLeft = this.props.scrollLeft;\r\n    let scrollTop = this.props.scrollTop;\r\n    let tableLeftBorder = this.props.tableLeftBorder;\r\n    let onChangeBorder = this.props.onChangeBorder;\r\n\r\n    if (this.props.className === 'table') {\r\n      scrollTop = this.state.scrollTop;\r\n      scrollLeft = this.state.scrollLeft;\r\n      tableLeftBorder = this.state.tableLeftBorder;\r\n      onChangeBorder = this.handleChangeBorder;\r\n    }\r\n\r\n    if (Array.isArray(children)) {\r\n      rows.push(\r\n        children.map((el, i) => {\r\n          if (el.type === 'tr') {\r\n            return (<Row className={el.type}\r\n                         isFixed={el.props.className}\r\n                         key={i}\r\n                         scrollTop={scrollTop}\r\n                         tableLeftBorder={tableLeftBorder}\r\n                         onChangeBorder={onChangeBorder}\r\n                         scrollLeft={scrollLeft}>\r\n              {el.props.children}\r\n            </Row>)\r\n          } else {\r\n            return (<Table className={el.type}\r\n                           isFixed={el.props.className}\r\n                           key={i}\r\n                           scrollTop={scrollTop}\r\n                           tableLeftBorder={tableLeftBorder}\r\n                           onChangeBorder={onChangeBorder}\r\n                           scrollLeft={scrollLeft}>\r\n              {el.props.children}\r\n            </Table>)\r\n          }\r\n        })\r\n      );\r\n    } else {\r\n      if (children.type === 'tr') {\r\n        rows.push(\r\n          <Row className={children.type}\r\n               isFixed={children.props.className}\r\n               key={children.type.length}\r\n               scrollTop={scrollTop}\r\n               tableLeftBorder={tableLeftBorder}\r\n               onChangeBorder={onChangeBorder}\r\n               scrollLeft={scrollLeft}>{children.props.children}\r\n          </Row>)\r\n      } else {\r\n        rows.push(\r\n          <Table className={children.type}\r\n                 isFixed={children.props.className}\r\n                 key={children.type.length}\r\n                 scrollTop={scrollTop}\r\n                 tableLeftBorder={tableLeftBorder}\r\n                 onChangeBorder={onChangeBorder}\r\n                 scrollLeft={scrollLeft}>{children.props.children}\r\n          </Table>\r\n        )\r\n      }\r\n    }\r\n\r\n    className += this.props.className + ' ' + (this.state.isFixed ? this.state.isFixed : '');\r\n    //TODO можно использовать classNames\r\n    return (\r\n      <div className={className} ref={this.tableRef} onScroll={this.handleScroll}>\r\n        {rows}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Table;","import React from 'react';\r\nimport Table from \"./Table/Table\";\r\n\r\nexport default function TestTable() {\r\n  return (\r\n    <Table className={'table'}>\r\n      <thead>\r\n      <tr className={'row-fixed'}>\r\n        <th><div>ш1</div></th>\r\n        <th className={'col-fixed'}>ш2</th>\r\n        <th>ш3</th>\r\n        <th className={'col-fixed'}>ш4</th>\r\n        <th>ш5</th>\r\n        <th className={'col-fixed'}>ш6</th>\r\n        <th>ш7</th>\r\n        <th>ш8</th>\r\n        <th>ш9</th>\r\n      </tr>\r\n      </thead>\r\n      <tbody>\r\n      <tr>\r\n        <td>1</td>\r\n        <td className={'col-fixed'}>2</td>\r\n        <td>3</td>\r\n        <td className={'col-fixed'}>4</td>\r\n        <td>5</td>\r\n        <td className={'col-fixed'}>6</td>\r\n        <td>7</td>\r\n        <td>8</td>\r\n        <td>9</td>\r\n      </tr>\r\n      <tr>\r\n        <td>1</td>\r\n        <td className={'col-fixed'}>2</td>\r\n        <td>3</td>\r\n        <td className={'col-fixed'}>4</td>\r\n        <td>5</td>\r\n        <td className={'col-fixed'}>6</td>\r\n        <td>7</td>\r\n        <td>8</td>\r\n        <td>9</td>\r\n      </tr>\r\n      <tr>\r\n        <td>1</td>\r\n        <td className={'col-fixed'}>2</td>\r\n        <td>3</td>\r\n        <td className={'col-fixed'}>4</td>\r\n        <td>5</td>\r\n        <td className={'col-fixed'}>6</td>\r\n        <td>7</td>\r\n        <td>8</td>\r\n        <td>9</td>\r\n      </tr>\r\n      <tr>\r\n        <td>1</td>\r\n        <td className={'col-fixed'}>2</td>\r\n        <td>3</td>\r\n        <td className={'col-fixed'}>4</td>\r\n        <td>5</td>\r\n        <td className={'col-fixed'}>6</td>\r\n        <td>7</td>\r\n        <td>8</td>\r\n        <td>9</td>\r\n      </tr>\r\n      <tr>\r\n        <td>1</td>\r\n        <td className={'col-fixed'}>2</td>\r\n        <td>3</td>\r\n        <td className={'col-fixed'}>4</td>\r\n        <td>5</td>\r\n        <td className={'col-fixed'}>6</td>\r\n        <td>7</td>\r\n        <td>8</td>\r\n        <td>9</td>\r\n      </tr>\r\n      <tr>\r\n        <td>1</td>\r\n        <td className={'col-fixed'}>2</td>\r\n        <td>3</td>\r\n        <td className={'col-fixed'}>4</td>\r\n        <td>5</td>\r\n        <td className={'col-fixed'}>6</td>\r\n        <td>7</td>\r\n        <td>8</td>\r\n        <td>9</td>\r\n      </tr>\r\n      <tr>\r\n        <td>1</td>\r\n        <td className={'col-fixed'}>2</td>\r\n        <td>3</td>\r\n        <td className={'col-fixed'}>4</td>\r\n        <td>5</td>\r\n        <td className={'col-fixed'}>6</td>\r\n        <td>7</td>\r\n        <td>8</td>\r\n        <td>9</td>\r\n      </tr>\r\n      </tbody>\r\n    </Table>\r\n  )\r\n}\r\n","import React from 'react';\r\nimport TestTable from \"./TestTable\";\r\n\r\nfunction App() {\r\n  return (\r\n    <TestTable/>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(<App/>, document.getElementById('root'));"],"sourceRoot":""}